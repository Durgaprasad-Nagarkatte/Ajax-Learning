<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Ajax Github Projects API </title>
</head>
<body>
    <button id="button">Get Trending Repos</button>
    <div id = "response">
    </div>

    <iframe id="progress" style="visibility: hidden;" src="https://giphy.com/embed/jAYUbVXgESSti" width="480" height="270" frameBorder="0" class="giphy-embed" allowFullScreen></iframe>
    
    <script>
        //Create event listener
        document.getElementById('button').addEventListener(
            'click', loadResponse);

        function loadResponse(){
            console.log('button clicked')
            //Create XHR object
            var xhr = new XMLHttpRequest();
            // Open - type, url/file, async
            
            console.log(xhr);
            xhr.open('GET', 'https://api.github.com/search/issues?q=windows+label:bug+language:python+state:open&sort=c', true);

            xhr.onprogress = function(){
                document.getElementById("progress").style.visibility = "visible";
                
            }
            function alertFunc(){
                console.log('Hello');
            }

            xhr.onload = function(){
                myVar = setTimeout(alertFunc, 10000);
                document.getElementById("progress").style.visibility = "hidden";
                if(this.status == 200){
                    var response = document.getElementById("response");
                    var para = document.createElement("p");
                    var text = this.responseText;


                    var node = document.createTextNode(text);
                    para.appendChild(node);
                    response.appendChild(para);

                }
            }
            
            xhr.send()
            
        }
    </script>
</body>
</html>